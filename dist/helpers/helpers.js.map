{"version":3,"sources":["../../src/helpers/helpers.ts"],"sourcesContent":["import { Post } from '../interface'\n\nexport function cleanText(text?: string) {\n  if (!text) return undefined\n  return text.replace(/\\n/g, ' ').replace(/\\s+/g, ' ').trim()\n}\n\n/**\n * Convert \"7c2e54318e52416ca5769831454bf08d\" or \"7c2e5431-8e52-416c-a576-9831454bf08d\"\n * to \"7c2e5431-8e52-416c-a576-9831454bf08d\"\n */\nexport function idToUuid(id: string): string | null {\n  if (!id) {\n    return null\n  }\n\n  id = id.split('?')[0]\n  const match = id.match(/\\b([a-f0-9]{32})\\b/)\n\n  if (match) {\n    return `${id.slice(0, 8)}-${id.slice(8, 4 + 8)}-${id.slice(12, 4 + 12)}-${id.slice(\n      16,\n      4 + 16\n    )}-${id.slice(20)}`\n  }\n\n  const match2 = id.match(/\\b([a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12})\\b/)\n  if (match2) {\n    return match2[1]\n  }\n\n  return null\n}\n\n/**\n * Convert \"Nguyễn Văn Đông\" to \"nguyen-van-dong\"\n */\nexport function makeSlugText(text?: string | null): string | undefined {\n  if (!text) return undefined\n  return text\n    .toLowerCase()\n    .normalize('NFD')\n    .replace(/[\\u0300-\\u036f]/g, '')\n    .replace(/đ/g, 'd')\n    .replace(/Đ/g, 'D')\n    .replace(':', '')\n    .split(' ')\n    .join('-')\n    .replace(/^\\/|\\/$/g, '') // remove \"/\" at the beginning and the end\n}\n\n/**\n * Get a right start_cursor for pagination based on current page and posts\n * @param posts\n * @param postsPerPage\n * @param currentPage\n * @returns next_cursor or `undefined` (it has to be `undefined`, not `null` because\n * Notion API doesn't accept `null` value for `start_cursor`)\n */\nexport function getStartCursorForCurrentPage(\n  currentPage: number,\n  posts: Post[],\n  postsPerPage: number\n): string | undefined {\n  if (posts?.length === 0) return undefined\n  if (currentPage === 1) return undefined\n  const numPages = Math.ceil(posts.length / postsPerPage)\n  if (currentPage > numPages) return undefined\n  return posts[(currentPage - 1) * postsPerPage]?.id\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEO,SAAS,UAAU,MAAe;AACvC,MAAI,CAAC;AAAM,WAAO;AAClB,SAAO,KAAK,QAAQ,OAAO,GAAG,EAAE,QAAQ,QAAQ,GAAG,EAAE,KAAK;AAC5D;AAMO,SAAS,SAAS,IAA2B;AAClD,MAAI,CAAC,IAAI;AACP,WAAO;AAAA,EACT;AAEA,OAAK,GAAG,MAAM,GAAG,EAAE,CAAC;AACpB,QAAM,QAAQ,GAAG,MAAM,oBAAoB;AAE3C,MAAI,OAAO;AACT,WAAO,GAAG,GAAG,MAAM,GAAG,CAAC,CAAC,IAAI,GAAG,MAAM,GAAG,IAAI,CAAC,CAAC,IAAI,GAAG,MAAM,IAAI,IAAI,EAAE,CAAC,IAAI,GAAG;AAAA,MAC3E;AAAA,MACA,IAAI;AAAA,IACN,CAAC,IAAI,GAAG,MAAM,EAAE,CAAC;AAAA,EACnB;AAEA,QAAM,SAAS,GAAG,MAAM,oEAAoE;AAC5F,MAAI,QAAQ;AACV,WAAO,OAAO,CAAC;AAAA,EACjB;AAEA,SAAO;AACT;AAKO,SAAS,aAAa,MAA0C;AACrE,MAAI,CAAC;AAAM,WAAO;AAClB,SAAO,KACJ,YAAY,EACZ,UAAU,KAAK,EACf,QAAQ,oBAAoB,EAAE,EAC9B,QAAQ,MAAM,GAAG,EACjB,QAAQ,MAAM,GAAG,EACjB,QAAQ,KAAK,EAAE,EACf,MAAM,GAAG,EACT,KAAK,GAAG,EACR,QAAQ,YAAY,EAAE;AAC3B;AAUO,SAAS,6BACd,aACA,OACA,cACoB;AA/DtB;AAgEE,OAAI,+BAAO,YAAW;AAAG,WAAO;AAChC,MAAI,gBAAgB;AAAG,WAAO;AAC9B,QAAM,WAAW,KAAK,KAAK,MAAM,SAAS,YAAY;AACtD,MAAI,cAAc;AAAU,WAAO;AACnC,UAAO,YAAO,cAAc,KAAK,YAAY,MAAtC,mBAAyC;AAClD;","names":[]}